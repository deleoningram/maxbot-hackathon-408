MESSAGES = {
    # Welcome & Start
    "welcome": {
        "ru": "ðŸŒ± Ð”Ð¾Ð±Ñ€Ð¾ Ð¿Ð¾Ð¶Ð°Ð»Ð¾Ð²Ð°Ñ‚ÑŒ Ð² Ð›ÐµÑÐ½Ð¾Ð¹ Ð¤Ð¾ÐºÑƒÑ!\n\nÐ¯ Ð¿Ð¾Ð¼Ð¾Ð³Ñƒ Ð²Ð°Ð¼ ÑÐ¾ÑÑ€ÐµÐ´Ð¾Ñ‚Ð¾Ñ‡Ð¸Ñ‚ÑŒÑÑ Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ðµ Ð¸ Ð²Ñ‹Ñ€Ð°ÑÑ‚Ð¸Ñ‚ÑŒ Ð²Ð¸Ñ€Ñ‚ÑƒÐ°Ð»ÑŒÐ½Ñ‹Ð¹ Ð»ÐµÑ. ÐšÐ°Ð¶Ð´Ð°Ñ ÑÐµÑÑÐ¸Ñ ÐºÐ¾Ð½Ñ†ÐµÐ½Ñ‚Ñ€Ð°Ñ†Ð¸Ð¸ Ð²Ñ‹Ñ€Ð°Ñ‰Ð¸Ð²Ð°ÐµÑ‚ Ð½Ð¾Ð²Ð¾Ðµ Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ðµ.\n\nÐ˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ /start Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑƒÐ²Ð¸Ð´ÐµÑ‚ÑŒ Ð¼ÐµÐ½ÑŽ.",
        "en": "ðŸŒ± Welcome to Forest Focus!\n\nI'll help you stay focused and grow a virtual forest. Each focus session grows a new plant.\n\nUse /start to see the menu."
    },
    
    "main_menu": {
        "ru": "ðŸŒ³ **Ð“Ð»Ð°Ð²Ð½Ð¾Ðµ Ð¼ÐµÐ½ÑŽ**\n\nÐ’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ðµ:",
        "en": "ðŸŒ³ **Main Menu**\n\nChoose an action:"
    },
    
    # Session Management
    "start_session_prompt": {
        "ru": "â±ï¸ **ÐÐ°Ñ‡Ð°Ñ‚ÑŒ ÑÐµÑÑÐ¸ÑŽ Ñ„Ð¾ÐºÑƒÑÐ°**\n\nÐ’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ð´Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ:",
        "en": "â±ï¸ **Start Focus Session**\n\nChoose duration:"
    },
    
    "choose_plant": {
        "ru": "ðŸŒ± **Ð’Ñ‹Ð±ÐµÑ€Ð¸Ñ‚Ðµ Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ðµ Ð´Ð»Ñ Ð²Ñ‹Ñ€Ð°Ñ‰Ð¸Ð²Ð°Ð½Ð¸Ñ**\n\nÐ”Ð¾ÑÑ‚ÑƒÐ¿Ð½Ñ‹Ðµ Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ñ:",
        "en": "ðŸŒ± **Choose Plant to Grow**\n\nAvailable plants:"
    },
    
    "session_started": {
        "ru": "ðŸŒ± **Ð¡ÐµÑÑÐ¸Ñ Ð½Ð°Ñ‡Ð°Ð»Ð°ÑÑŒ!**\n\nâ±ï¸ Ð”Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ: {duration} Ð¼Ð¸Ð½ÑƒÑ‚\nðŸŒ¿ Ð Ð°ÑÑ‚ÐµÐ½Ð¸Ðµ: {plant}\n\nðŸ’¡ Ð¡Ð¾ÑÑ€ÐµÐ´Ð¾Ñ‚Ð¾Ñ‡ÑŒÑ‚ÐµÑÑŒ Ð½Ð° Ñ€Ð°Ð±Ð¾Ñ‚Ðµ. Ð•ÑÐ»Ð¸ Ð²Ñ‹ Ð¿Ð¾ÐºÐ¸Ð½ÐµÑ‚Ðµ Ð±Ð¾Ñ‚, Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð³Ð¸Ð±Ð½ÐµÑ‚!\n\nÐ—Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚Ðµ ÑÐµÑÑÐ¸ÑŽ Ñ‡ÐµÑ€ÐµÐ· {duration} Ð¼Ð¸Ð½ÑƒÑ‚ ÐºÐ½Ð¾Ð¿ÐºÐ¾Ð¹ Ð½Ð¸Ð¶Ðµ.",
        "en": "ðŸŒ± **Session Started!**\n\nâ±ï¸ Duration: {duration} minutes\nðŸŒ¿ Plant: {plant}\n\nðŸ’¡ Stay focused. If you leave, your plant will die!\n\nComplete session in {duration} minutes using button below."
    },
    
    "session_completed": {
        "ru": "ðŸŽ‰ **ÐžÑ‚Ð»Ð¸Ñ‡Ð½Ð°Ñ Ñ€Ð°Ð±Ð¾Ñ‚Ð°!**\n\nâœ… Ð¡ÐµÑÑÐ¸Ñ Ð·Ð°Ð²ÐµÑ€ÑˆÐµÐ½Ð°\n{plant} **{plant_name}** Ð²Ñ‹Ñ€Ð¾Ñ Ð² Ð²Ð°ÑˆÐµÐ¼ Ð»ÐµÑÑƒ!\n\nðŸ“Š Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°:\nðŸŒ³ Ð’ÑÐµÐ³Ð¾ Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ð¹: {total}\nâ±ï¸ Ð’Ñ€ÐµÐ¼Ñ Ñ„Ð¾ÐºÑƒÑÐ°: {minutes} Ð¼Ð¸Ð½\nðŸ”¥ Ð¡ÐµÑ€Ð¸Ñ: {streak} Ð´Ð½ÐµÐ¹\n\n{achievement_text}",
        "en": "ðŸŽ‰ **Great Work!**\n\nâœ… Session completed\n{plant} **{plant_name}** grew in your forest!\n\nðŸ“Š Stats:\nðŸŒ³ Total plants: {total}\nâ±ï¸ Focus time: {minutes} min\nðŸ”¥ Streak: {streak} days\n\n{achievement_text}"
    },
    
    "plant_died": {
        "ru": "ðŸ˜¢ **Ð Ð°ÑÑ‚ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð³Ð¸Ð±Ð»Ð¾...**\n\nÐ’Ñ‹ Ð¿Ð¾ÐºÐ¸Ð½ÑƒÐ»Ð¸ ÑÐµÑÑÐ¸ÑŽ Ñ€Ð°Ð½ÑŒÑˆÐµ Ð²Ñ€ÐµÐ¼ÐµÐ½Ð¸. ÐŸÐ¾Ð¿Ñ€Ð¾Ð±ÑƒÐ¹Ñ‚Ðµ ÑÐ½Ð¾Ð²Ð°!",
        "en": "ðŸ˜¢ **Plant Died...**\n\nYou left the session early. Try again!"
    },
    
    # Statistics
    "forest_view": {
        "ru": "ðŸŒ² **Ð’Ð°Ñˆ Ð»ÐµÑ**\n\nðŸŒ³ Ð Ð°ÑÑ‚ÐµÐ½Ð¸Ð¹ Ð²Ñ‹Ñ€Ð°Ñ‰ÐµÐ½Ð¾: {total}\nâ±ï¸ Ð§Ð°ÑÐ¾Ð² Ñ„Ð¾ÐºÑƒÑÐ°: {hours}\nðŸ”¥ Ð¢ÐµÐºÑƒÑ‰Ð°Ñ ÑÐµÑ€Ð¸Ñ: {streak} Ð´Ð½ÐµÐ¹\nðŸ† Ð›ÑƒÑ‡ÑˆÐ°Ñ ÑÐµÑ€Ð¸Ñ: {best_streak} Ð´Ð½ÐµÐ¹\n\n{recent_plants}\n\nðŸ’¡ Ð¡Ð»ÐµÐ´ÑƒÑŽÑ‰ÐµÐµ Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ðµ Ð¾Ñ‚ÐºÑ€Ð¾ÐµÑ‚ÑÑ Ñ‡ÐµÑ€ÐµÐ· {next} Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ð¹",
        "en": "ðŸŒ² **Your Forest**\n\nðŸŒ³ Plants grown: {total}\nâ±ï¸ Focus hours: {hours}\nðŸ”¥ Current streak: {streak} days\nðŸ† Best streak: {best_streak} days\n\n{recent_plants}\n\nðŸ’¡ Next plant unlocks in {next} plants"
    },
    
    # Streak
    "streak_broken": {
        "ru": "ðŸ’” **Ð¡ÐµÑ€Ð¸Ñ Ð¿Ñ€ÐµÑ€Ð²Ð°Ð½Ð°**\n\nÐ’Ñ‹ Ð½Ðµ Ð²Ñ‹Ñ€Ð°Ñ‰Ð¸Ð²Ð°Ð»Ð¸ Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ñ Ð²Ñ‡ÐµÑ€Ð°. Ð¡ÐµÑ€Ð¸Ñ ÑÐ±Ñ€Ð¾ÑˆÐµÐ½Ð° Ð´Ð¾ 1.\n\nðŸ’Ž Ð£ Ð²Ð°Ñ ÐµÑÑ‚ÑŒ {freezes} Ð·Ð°Ð¼Ð¾Ñ€Ð¾Ð·Ð¾Ðº ÑÐµÑ€Ð¸Ð¸. Ð˜ÑÐ¿Ð¾Ð»ÑŒÐ·ÑƒÐ¹Ñ‚Ðµ Ð¸Ñ…, Ñ‡Ñ‚Ð¾Ð±Ñ‹ ÑÐ¾Ñ…Ñ€Ð°Ð½Ð¸Ñ‚ÑŒ Ð¿Ñ€Ð¾Ð³Ñ€ÐµÑÑ!",
        "en": "ðŸ’” **Streak Broken**\n\nYou didn't grow plants yesterday. Streak reset to 1.\n\nðŸ’Ž You have {freezes} streak freezes. Use them to save progress!"
    },
    
    "milestone_reached": {
        "ru": "ðŸŽŠ **Ð’ÐµÑ…Ð° Ð´Ð¾ÑÑ‚Ð¸Ð³Ð½ÑƒÑ‚Ð°!**\n\nðŸ”¥ Ð¡ÐµÑ€Ð¸Ñ {days} Ð´Ð½ÐµÐ¹!\n\n{reward_text}",
        "en": "ðŸŽŠ **Milestone Reached!**\n\nðŸ”¥ {days} day streak!\n\n{reward_text}"
    },
    
    # Buttons
    "btn_start_focus": {
        "ru": "ðŸŽ¯ ÐÐ°Ñ‡Ð°Ñ‚ÑŒ Ñ„Ð¾ÐºÑƒÑ",
        "en": "ðŸŽ¯ Start Focus"
    },
    "btn_my_forest": {
        "ru": "ðŸŒ² ÐœÐ¾Ð¹ Ð»ÐµÑ",
        "en": "ðŸŒ² My Forest"
    },
    "btn_statistics": {
        "ru": "ðŸ“Š Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ°",
        "en": "ðŸ“Š Statistics"
    },
    "btn_achievements": {
        "ru": "ðŸ† Ð”Ð¾ÑÑ‚Ð¸Ð¶ÐµÐ½Ð¸Ñ",
        "en": "ðŸ† Achievements"
    },
    "btn_settings": {
        "ru": "âš™ï¸ ÐÐ°ÑÑ‚Ñ€Ð¾Ð¹ÐºÐ¸",
        "en": "âš™ï¸ Settings"
    },
    "btn_help": {
        "ru": "â“ ÐŸÐ¾Ð¼Ð¾Ñ‰ÑŒ",
        "en": "â“ Help"
    },
    "btn_complete_session": {
        "ru": "âœ… Ð—Ð°Ð²ÐµÑ€ÑˆÐ¸Ñ‚ÑŒ ÑÐµÑÑÐ¸ÑŽ",
        "en": "âœ… Complete Session"
    },
    "btn_abandon_session": {
        "ru": "âŒ ÐŸÑ€ÐµÑ€Ð²Ð°Ñ‚ÑŒ (Ñ€Ð°ÑÑ‚ÐµÐ½Ð¸Ðµ Ð¿Ð¾Ð³Ð¸Ð±Ð½ÐµÑ‚)",
        "en": "âŒ Abandon (plant dies)"
    },
    "btn_25min": {
        "ru": "â±ï¸ 25 Ð¼Ð¸Ð½ÑƒÑ‚ (Pomodoro)",
        "en": "â±ï¸ 25 minutes (Pomodoro)"
    },
    "btn_50min": {
        "ru": "â±ï¸ 50 Ð¼Ð¸Ð½ÑƒÑ‚",
        "en": "â±ï¸ 50 minutes"
    },
    "btn_custom": {
        "ru": "ðŸ”§ Ð¡Ð²Ð¾Ñ Ð´Ð»Ð¸Ñ‚ÐµÐ»ÑŒÐ½Ð¾ÑÑ‚ÑŒ",
        "en": "ðŸ”§ Custom duration"
    }
}

def get_message(key: str, lang: str = "ru", **kwargs) -> str:
    """Get localized message with formatting"""
    template = MESSAGES.get(key, {}).get(lang, "")
    if kwargs:
        return template.format(**kwargs)
    return template
